# Metrics view YAML
# Reference documentation: https://docs.rilldata.com/reference/project-files/dashboards
# This file was generated using AI.

version: 1
type: metrics_view

display_name: UK Price Paid Metrics
connector: clickhouse
timeseries: date

dimensions:
  - column: transaction_id
    name: transaction_id
  - column: postcode
    name: postcode
  - column: property_type
    name: property_type
  - column: old_new
    name: old_new
  - column: duration
    name: duration
  - column: PAON
    name: PAON
  - column: SAON
    name: SAON
  - column: street
    name: street
  - column: locality
    name: locality
  - column: town_city
    name: town_city
  - column: district
    name: district
  - column: county
    name: county
  - column: ppd_category_type
    name: ppd_category_type
  - column: record_status
    name: record_status
    
measures:
  - name: total_transactions
    display_name: Total Transactions
    expression: COUNT(*)
    description: Total number of property transactions recorded.
  - name: average_price
    display_name: Average Price
    expression: AVG(price)
    description: Average price of properties sold.
  - name: total_price
    display_name: Total Price
    expression: SUM(price)
    description: Total sum of all property prices.
  - name: max_price
    display_name: Maximum Price
    expression: MAX(price)
    description: Highest property price recorded.
  - name: min_price
    display_name: Minimum Price
    expression: MIN(price)
    description: Lowest property price recorded.
  # - name: average_price_new_properties
  #   display_name: Average Price of New Properties
  #   expression: AVG(price * is_new)
  #   description: Average price of properties marked as new.
  # - name: count_new_properties
  #   display_name: Count of New Properties
  #   expression: SUM(is_new)
  #   description: Total number of new properties sold.
  - name: average_price_by_type
    display_name: Average Price by Type
    expression: AVG(price)
    description: Average price of properties grouped by type.
  - name: max_price_by_district
    display_name: Maximum Price by District
    expression: MAX(price)
    description: Highest property price recorded in each district.
  - name: min_price_by_county
    display_name: Minimum Price by County
    expression: MIN(price)
    description: Lowest property price recorded in each county.
    
model: uk_price_paid
# database_schema: default
